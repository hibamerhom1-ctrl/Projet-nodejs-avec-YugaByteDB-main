version: '3.8'

services:
  yugabytedb:
    image: yugabytedb/yugabyte:latest
    container_name: yugabytedb
    ports:
      - "5433:5433"  # PostgreSQL port
      - "7000:7000"  # Master UI
      - "9000:9000"  # TServer UI
    environment:
      - POSTGRES_USER=yugabyte
      - POSTGRES_PASSWORD=yugabyte
      - POSTGRES_DB=yugabyte
    volumes:
      - yugabyte-data:/var/lib/yugabyte
    command: [
      "bin/yugabyted",
      "start",
      "--daemon=false",
      "--ui=false"
    ]
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U yugabyte -d yugabyte"]
      interval: 10s
      timeout: 5s
      retries: 5

volumes:
  yugabyte-data:

